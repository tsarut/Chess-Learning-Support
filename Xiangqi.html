<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="css/setXiangqi.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<style type="text/css">

	</style>
	<script type="text/javascript" src="javascript/setgame.js"></script>
	<script>

$(document).ready(function(){
	$(".Mark").click(function(){
		$(this).animate({left:'250px'});]
	});
});

	</script>
<script type="text/javascript">
var thisclass ="";
var listarr1=["a","b","c","d","e","f","g","h","i","j"];
var listarr2=["1","2","3","4","5","6","7","8","9"];

var arr = [["a1","a2","a3","a4","a5","a6","a7","a8","a9"],
["b1","b2","b3","b4","b5","b6","b7","b8","b9"],
["c1","c2","c3","c4","c5","c6","c7","c8","c9"],
["d1","d2","d3","d4","d5","d6","d7","d8","d9"],
["e1","e2","e3","e4","e5","e6","e7","e8","e9"],
["f1","f2","f3","f4","f5","f6","f7","f8","f9"],
["g1","g2","g3","g4","g5","g6","g7","g8","g9"],
["h1","h2","h3","h4","h5","h6","h7","h8","h9"],
["i1","i2","i3","i4","i5","i6","i7","i8","i9"],
["j1","j2","j3","j4","j5","j6","j7","j8","j9"]
];
var table=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];
var standby=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];






function changeBoard () {
	// body...

	if (turn==1) {
		turn--;
	}else
	if (turn==0) {
		turn++;
	}
	table=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];
	standby=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];
	if (pickIt.className.slice(0,-1)==Pawn) {

	};
	var images = document.getElementsByTagName('img');
	for (var j = 1; j < images.length; j++) {
	x,y=getXY(images[j]);
	if (images[j].className.slice(-1)=="B") {
		standby[x][y]=1;
	} else{if (images[j].className.slice(-1)=="W") {
		standby[x][y]=-1;
	};};
	}
}


//var selectID;
//var selectClass;

function sentClass (name,xy) {
	// body...
	x,y=getXY(xy);
	if (name=="Rook") {
		Rook(x,y);
		pickIt=xy;
	} else{if (name=="Pawn") {
		Pawn(x,y)
		pickIt=xy;
	} else{if (name=="Horse") {
		Horse(x,y);
		pickIt=xy;
	} else{if (name=="Elephant") {
		Elephant(x,y);
		pickIt=xy;
	} else{if (name=="Guard") {
		Guard(x,y);
		pickIt=xy;
	} else{if (name=="Cannon") {
		Cannon(x,y);
		pickIt=xy;
	} else{if (name=="King") {
		King(x,y);
		pickIt=xy;
	};};};};};};};
setMark();
}

function Pawn (x,y) {
	// body...
	makeMark(x+standby[x][y],y);
	if (x*standby[x][y]>4) {
		makeMark(x,y+1);
		makeMark(x,y-1);		
	} else{
		if (standby[x][y]==-1&&x<=4) {
		makeMark(x,y+1);
		makeMark(x,y-1);
		} else{};
	};
	console.log("pawn mark");
}
function Horse (x,y) {
	// body...
	if (x<listarr1.length-1) {
		if (standby[x+1][y]==0&&x<8) {
		if (standby[x+2][y+1]==0||standby[x+2][y+1]*standby[x][y]==-1) {
			makeMark(x+2,y+1);
		} 
		if (standby[x+2][y-1]==0||standby[x+2][y-1]*standby[x][y]==-1) {
			makeMark(x+2,y-1);
		} 
	}
	if (standby[x][y+1]==0) {
		if (standby[x+1][y+2]==0||standby[x+1][y+2]*standby[x][y]==-1) {
			makeMark(x+1,y+2);
		} 
		if (standby[x-1][y+2]==0||standby[x-1][y-2]*standby[x][y]==-1) {
			makeMark(x-1,y+2);
		} 
	};
	};
	if (x>0) {
		if (standby[x-1][y]==0&&x>1) {
		if (standby[x-2][y+1]==0||standby[x-2][y+1]*standby[x][y]==-1) {
			makeMark(x-2,y+1);
		} 
		if (standby[x-2][y-1]==0||standby[x-2][y-1]*standby[x][y]==-1) {
			makeMark(x-2,y-1);
		} 
	}
	};
		if (standby[x][y-1]==0&&x>1) {
		if (standby[x-1][y-2]==0||standby[x-1][y-2]*standby[x][y]==-1) {
			makeMark(x-1,y-2);
		} if (x<listarr1.length-1) {
			if (standby[x+1][y-2]==0||standby[x+1][y-2]*standby[x][y]==-1) {
			makeMark(x+1,y-2);
		}
		};
		 
		
	};
	
}
function Elephant (x,y) {
	// body...
	if (standby[x][y]==-1) {
		if (x>6) {
			if (standby[x-1][y-1]==0) {
			if (standby[x-2][y-2]>-1) {
				makeMark(x-2,y-2);
			};
		}
		if (standby[x-1][y+1]==0) {
			if (standby[x-2][y+2]>-1) {
				makeMark(x-2,y+2);
			};
		}
		};
		if (x<8) {if (standby[x+1][y+1]==0) {
			if (standby[x+2][y+2]>-1) {
				makeMark(x+2,y+2);
			};
		} 
		
		if (standby[x+1][y-1]==0) {
			if (standby[x+2][y-2]>-1) {
				makeMark(x+2,y-2);
			};
		}};
		
	} else{
		if (standby[x][y]==1) {
			if (x>1) {
		if (standby[x-1][y-1]==0) {
			if (standby[x-2][y-2]<1) {
				makeMark(x-2,y-2);
			};
		}
		if (standby[x-1][y+1]==0) {
			if (standby[x-2][y+2]<1) {
				makeMark(x-2,y+2);
			};
		}		
			} 
			if (x<3) {
						if (standby[x+1][y+1]==0) {
			if (standby[x+2][y+2]>-1) {
				makeMark(x+2,y+2);
			};
		} 
		
		
		if (standby[x+1][y-1]==0) {
			if (standby[x+2][y-2]>-1) {
				makeMark(x+2,y-2);
			};
		}
			};

	}
	};
}
function Guard (x,y) {
	// body...
	
	if (standby[1][4]<1&&(x==0||x==2)) {
		makeMark(1,4);
	};
	if (standby[8][4]>-1&&(x==9||x==7)) {
		makeMark(8,4);
	};
	if (x==1) {
		if (standby[0][3]<1) {
			makeMark(0,3);
		};
		if (standby[0][5]<1) {
			makeMark(0,5);
		};
		if (standby[2][3]<1) {
			makeMark(2,3);
		};
		if (standby[2][5]<1) {
			makeMark(2,5);
		};
	};
	
	if (x==8) {
		if (standby[9][3]>-1) {
			makeMark(9,3);
		};
		if (standby[9][5]>-1) {
			makeMark(9,5);
		};
		if (standby[7][3]>-1) {
			makeMark(7,3);
		};
		if (standby[7][5]>-1) {
			makeMark(7,5);
		};
	};
	
}
function Cannon (x,y) {

	for (var i = x+1; i < 10; i++) {
		if (standby[x][y]*standby[i][y]==0) {
			makeMark(i,y);
		} else{
			for (var j = i+1; j < 10; j++) {
				if (standby[x][y]*standby[j][y]==-1) {	
					makeMark(j,y);
					break;
				}
			} break;
		};
	};
	for (var i = x-1; i >= 0; i--) {
		if (standby[x][y]*standby[i][y]==0) {
			makeMark(i,y);
		} else{
			for (var j = i-1; j >= 0; j--) {
				if (standby[x][y]*standby[j][y]==-1) {	
					makeMark(j,y);
					break;
				}
			} break;
		};
	};
	for (var i = y+1; i < 10; i++) {
		if (standby[x][y]*standby[x][i]==0) {
			makeMark(x,i);
		} else{
			for (var j = i+1; j < 10; j++) {
				if (standby[x][y]*standby[x][j]==-1) {	
					makeMark(x,j);
					break;
				}
			} break;
		};
	};
	for (var i = y-1; i >= 0; i--) {
		if (standby[x][y]*standby[x][i]==0) {
			makeMark(x,i);
		} else{
			for (var j = i-1; j >= 0; j--) {
				if (standby[x][y]*standby[x][j]==-1) {	
					makeMark(x,j);
					break;
				}
			} break;
		};
	};

}

function King (x,y) {
	// body...
	if (x*standby[x][y]>0||x*standby[x][y]<-7) {
		if (standby[x-1][y]*standby[x][y]<1) {
			makeMark(x-1,y);
		};
	}
	if (x*standby[x][y]<2&&x*standby[x][y]>-9) {
		if (standby[x+1][y]*standby[x][y]<1) {
			makeMark(x+1,y);
		};
	};
	if (y>3&&standby[x][y-1]*standby[x][y]<1) {
		makeMark(x,y-1);
	};
	if (y<5&&standby[x][y+1]*standby[x][y]<1) {
		makeMark(x,y+1);
	};
}

function makeMark (x,y) {
	// body...
	var newimg = document.createElement("img");
	newimg.id=listarr1[x]+listarr2[y];
	newimg.className="Mark";
	newimg.src="gui/xiangqi/Mark_Allow.png";
	document.body.appendChild(newimg);

}
//var newimg = document.createElement("img");
//newimg.id="a1";
//newimg.src="pic/xiangqi/RookW.png";
//document.body.appendChild(newimg);
	

</script>
</head>
<body onload="setclick()">
<img src="gui/xiangqi/xiangqiBoard.png" id="back">
<img src="gui/xiangqi/RookB.png" class="RookB" id="a1">
<img src="gui/xiangqi/HorseB.png" class="HorseB" id="a2">
<img src="gui/xiangqi/ElephantB.png" class="ElephantB" id="a3">
<img src="gui/xiangqi/GuardB.png" class="GuardB" id="a4">
<img src="gui/xiangqi/KingB.png" class="KingB" id="a5">
<img src="gui/xiangqi/GuardB.png" class="GuardB" id="a6">
<img src="gui/xiangqi/ElephantB.png" class="ElephantB" id="a7">
<img src="gui/xiangqi/HorseB.png" class="HorseB" id="a8">
<img src="gui/xiangqi/RookB.png" class="RookB" id="a9">
<img src="gui/xiangqi/PawnB.png" class="PawnB" id="d1">
<img src="gui/xiangqi/PawnB.png" class="PawnB" id="d3">
<img src="gui/xiangqi/PawnB.png" class="PawnB" id="d5">
<img src="gui/xiangqi/PawnB.png" class="PawnB" id="d7">
<img src="gui/xiangqi/PawnB.png" class="PawnB" id="d9">
<img src="gui/xiangqi/CannonB.png" class="CannonB" id="c2">
<img src="gui/xiangqi/CannonB.png" class="CannonB" id="c8">

<img src="gui/xiangqi/RookW.png" class="RookW" id="j1">
<img src="gui/xiangqi/HorseW.png" class="HorseW" id="j2">
<img src="gui/xiangqi/ElephantW.png" class="ElephantW" id="j3">
<img src="gui/xiangqi/GuardW.png" class="GuardW" id="j4">
<img src="gui/xiangqi/KingW.png" class="KingW" id="j5">
<img src="gui/xiangqi/GuardW.png" class="GuardW" id="j6">
<img src="gui/xiangqi/ElephantW.png" class="ElephantW" id="j7">
<img src="gui/xiangqi/HorseW.png" class="HorseW" id="j8">
<img src="gui/xiangqi/RookW.png" class="RookW" id="j9">
<img src="gui/xiangqi/PawnW.png" class="PawnW" id="g1">
<img src="gui/xiangqi/PawnW.png" class="PawnW" id="g3">
<img src="gui/xiangqi/PawnW.png" class="PawnW" id="g5">
<img src="gui/xiangqi/PawnW.png" class="PawnW" id="g7">
<img src="gui/xiangqi/PawnW.png" class="PawnW" id="g9">
<img src="gui/xiangqi/CannonW.png" class="CannonW" id="h2">
<img src="gui/xiangqi/CannonW.png" class="CannonW" id="h8">
</body>	
</html>